<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
  <head>
    <meta http-equiv="content-type" content="text/html;charset=utf-8">
    <title>委托模式</title>
    <script type="text/javascript" src="../jquery-3.3.1.js"></script>
  </head>
  <body>
    <p>s</p>
    <div>1</div>
    <span>2</span>
    <div>3</div>
    <div>
      委托模式（Entrust）：多个对象接收并处理同一请求，他们将请求委托给另一个对象统一处理请求。
    </div>
    <div id="container">
      <div>
        <div>
          <ul id="ul-test">
            <li><span id="span1">1</span></li>
            <li><span id="span2">2</span></li>
            <li>3</li>
            <li>4</li>
          </ul>
        </div>  
      </div>
      <div>
        <input type="button" value="上一个" name="" id="pre-btn">
        <div>
          <button>sss</button>
          <ul>
            <li><span id="span5"></span></li>
            <li><span id="span6"></span></li>
          </ul>
          <button>222</button>

        </div>
        <input type="button" id="next-btn" value="下一个" name="">
      </div>
    </div>

    <script type="text/javascript">
      var ul = document.getElementById('ul-test');
      ul.onclick = function(e){
        e = e || window.event;
        var target = e.target || e.srcElement;
        if(target.nodeName.toLowerCase() == 'span'){
          target.style.background = 'gray';
        }
      };

      var span = document.createElement('span');
      span.innerHTML = '测试';
      var li = document.createElement('li');
      li.appendChild(span);
      ul.appendChild(li);
    </script>


    <script type="text/javascript">
      /**
       *clik
       * dele被委托的
       * type 事件类型
       * fn 要执行的方法
       */
      function delegate(clik, dele, type, fn){
        function addEvent(e){
          e = e || window.event;
          var target = e.target || e.srcElement;
          if(target.nodeName.toLowerCase() == dele.toLowerCase()){
            fn();
          }
        }
        if(clik.addEventListener){
          clik.addEventListener(type, function(e){
            addEvent(e);
          }, false);
        }else if(clik.attachEvent){
          clik.attachEvent('on' + type, function(){
            addEvent(e);
          });
        }else{
          clik['on' + type]  = function(e){
            addEvent(e);
          }
        }
      }

      delegate(document.body, 'button' ,'click', function(){
        console.log('委托成功')
      });
    </script>
  </body>
</html>



































